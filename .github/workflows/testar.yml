name: ğŸ§ª Testar Projeto Eliza

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  testar-desktop:
    runs-on: ubuntu-latest
    name: ğŸ–¥ï¸ Testar versÃ£o Desktop
    
    steps:
    - name: â¬ Baixar cÃ³digo
      uses: actions/checkout@v4
      
    - name: ğŸ“ Ver estrutura
      run: |
        echo "Estrutura do projeto:"
        find . -type f -name "*.sh" | sort
        echo ""
        echo "ConteÃºdo da pasta Eliza:"
        ls -la projetos/eliza/desktop/
        
    - name: ğŸ”§ Dar permissÃµes
      run: |
        echo "Dando permissÃ£o de execuÃ§Ã£o..."
        chmod +x projetos/eliza/desktop/*.sh
        ls -la projetos/eliza/desktop/*.sh
        
    - name: ğŸ§ª Teste 1 - Arquivos existem
      run: |
        echo "Verificando se arquivos principais existem..."
        [ -f "projetos/eliza/desktop/eliza.sh" ] || { echo "âŒ eliza.sh nÃ£o encontrado"; exit 1; }
        [ -f "projetos/eliza/desktop/configurar_contato.sh" ] || { echo "âŒ configurar_contato.sh nÃ£o encontrado"; exit 1; }
        echo "âœ… Todos os arquivos encontrados!"
        
    - name: ğŸ§ª Teste 2 - SÃ£o executÃ¡veis
      run: |
        echo "Verificando permissÃµes..."
        [ -x "projetos/eliza/desktop/eliza.sh" ] || { echo "âŒ eliza.sh nÃ£o Ã© executÃ¡vel"; exit 1; }
        [ -x "projetos/eliza/desktop/configurar_contato.sh" ] || { echo "âŒ configurar_contato.sh nÃ£o Ã© executÃ¡vel"; exit 1; }
        echo "âœ… Todos os arquivos sÃ£o executÃ¡veis!"
        
    - name: ğŸ§ª Teste 3 - NÃ£o crasha ao iniciar
      run: |
        echo "Testando inicializaÃ§Ã£o rÃ¡pida (timeout 10s)..."
        cd projetos/eliza/desktop
        # Simula usuÃ¡rio pressionando '0' para sair imediatamente
        timeout 10s bash -c 'echo "0" | ./eliza.sh' || true
        echo "âœ… Eliza iniciou sem crashar!"
        
    - name: ğŸ§ª Teste 4 - Sintaxe Bash vÃ¡lida
      run: |
        echo "Verificando sintaxe do Bash..."
        bash -n projetos/eliza/desktop/eliza.sh && echo "âœ… Sintaxe eliza.sh OK"
        bash -n projetos/eliza/desktop/configurar_contato.sh && echo "âœ… Sintaxe configurar_contato.sh OK"
        
    - name: âœ… Sucesso
      run: |
        echo "========================================"
        echo "ğŸ‰ TODOS OS TESTES PASSARAM!"
        echo "O Eliza estÃ¡ funcionando corretamente."
        echo "========================================"
        
  testar-documentacao:
    runs-on: ubuntu-latest
    name: ğŸ“š Testar documentaÃ§Ã£o
    
    steps:
    - name: â¬ Baixar cÃ³digo
      uses: actions/checkout@v4
      
    - name: ğŸ“– Verificar READMEs
      run: |
        echo "Verificando arquivos de documentaÃ§Ã£o..."
        [ -f "README.md" ] && echo "âœ… README principal existe"
        [ -f "MANIFESTO.md" ] && echo "âœ… MANIFESTO existe"
        [ -f "projetos/eliza/README.md" ] && echo "âœ… README do Eliza existe"
        [ -f "projetos/eliza/desktop/README.md" ] && echo "âœ… README do Desktop existe"
        echo "âœ… Toda documentaÃ§Ã£o presente!"
